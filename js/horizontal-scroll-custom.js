gsap.registerPlugin(ScrollTrigger);function initHorizontalScroll(){if(window.innerWidth>=768){let sections=gsap.utils.toArray(".horzanim");document.body.classList.add("disable-scroll");const triggerElement=document.querySelector(".horizontal-scroll-trigger");const footer=document.querySelector(".footer-section");const body=document.querySelector("body");gsap.to(sections,{xPercent:-100*(sections.length-1),ease:"none",scrollTrigger:{trigger:triggerElement,pin:!0,scrub:0.2,snap:1/(sections.length-1),end:()=>"+="+triggerElement.offsetWidth,preventDefault:!0,onLeave:()=>{if(footer){footer.classList.add("footer-visible");body.classList.add("overflow")}},onEnterBack:()=>{if(footer){footer.classList.remove("footer-visible");body.classList.remove("overflow")}}}})}else{ScrollTrigger.killAll()}}
document.querySelector(".go-button").addEventListener("click",function(){gsap.to(".splash-screen",{y:"-100%",opacity:0,duration:0.2,ease:"power2.inOut",onComplete:function(){document.querySelector(".splash-screen").style.display="none";document.body.classList.remove("disable-scroll");ScrollTrigger.getAll().forEach(trigger=>trigger.enable());ScrollTrigger.refresh()}})});window.onbeforeunload=function(){window.scrollTo(0,0)};initHorizontalScroll();window.addEventListener("resize",()=>{setTimeout(()=>{initHorizontalScroll()},300)});let clouds=gsap.timeline();ScrollTrigger.create({animation:clouds,trigger:".scrollElement",start:"top top",end:"70% 100%",scrub:1});clouds.to("g#cleft1",{x:500},0);clouds.to("g#cmid1",{x:1000},0);clouds.to("g#cright1",{x:-1000},0);clouds.to("g#cleft2",{x:-700},0);clouds.to("g#cmid2",{x:-2500},0);clouds.to("g#cright2",{x:-4000},0);clouds.to("g#cleft3",{x:-6000},0);let sun=gsap.timeline();ScrollTrigger.create({animation:sun,trigger:".scrollElement",start:"1% top",end:"70% 100%",scrub:1});clouds.to("g#Sun",{x:Math.round(-500),y:Math.round(1400)},0);let moon=gsap.timeline();ScrollTrigger.create({animation:moon,trigger:".scrollElement",start:"1% top",end:"70% 100%",scrub:1});clouds.to("g#moon",{x:Math.round(500),y:Math.round(-1050)},0);let mount=gsap.timeline();ScrollTrigger.create({animation:mount,trigger:".scrollElement",start:"top top",end:"70% 100%",scrub:2});mount.to("g#mount",{x:-2000,ease:"power2.inOut"},0);mount.to("g#mount2",{x:-2000,ease:"power2.inOut"},0);mount.to("g#cloud-light-screen",{x:-2100,ease:"power2.inOut"},0.02);mount.to("g#cloud-dark-screen",{x:-2100,ease:"power2.inOut"},0.03);gsap.to(".wrapper-bg",{backgroundColor:"#222424",scrollTrigger:{trigger:".scrollElement",start:"top",end:"bottom",scrub:5,}})
gsap.to([".ss4"],{fill:"#68777b",scrollTrigger:{trigger:".scrollElement",start:"top",end:"bottom",scrub:5,}});gsap.to([".ss5"],{fill:"#566265",scrollTrigger:{trigger:".scrollElement",start:"top",end:"bottom",scrub:5,}});gsap.to([".sss2"],{fill:"#89bbf0",scrollTrigger:{trigger:".scrollElement",start:"top",end:"bottom",scrub:5,}});gsap.to([".sss3"],{fill:"#7ab4f0",scrollTrigger:{trigger:".scrollElement",start:"top",end:"bottom",scrub:5,}});let audio=document.getElementById("myAudio");let audioAllowed=!1;const toggleBtn=document.getElementById("audioToggleBtn");toggleBtn.addEventListener("click",function(){if(!audioAllowed)return;if(audio.paused){audio.play();toggleBtn.innerText="ðŸ”ˆ Pause Audio";toggleBtn.classList.remove("audio-paused");toggleBtn.classList.add("audio-playing")}else{audio.pause();toggleBtn.innerText="ðŸ”Š Play Audio";toggleBtn.classList.remove("audio-playing");toggleBtn.classList.add("audio-paused")}});function enableAudio(){if(!audioAllowed){audio.play().then(()=>{audio.pause();audioAllowed=!0;document.querySelector(".info").style.display="none"}).catch(error=>console.log("Error enabling audio:",error))}}
document.addEventListener("click",enableAudio,{once:!0});document.addEventListener("touchstart",enableAudio,{once:!0});ScrollTrigger.create({trigger:".scrollElement",start:"top top",endTrigger:".footer-section",end:"top center",scrub:5,onEnter:()=>{if(audioAllowed){audio.play();toggleBtn.innerText="ðŸ”ˆ Pause Audio";toggleBtn.classList.remove("audio-paused");toggleBtn.classList.add("audio-playing")}},onLeaveBack:()=>{if(audioAllowed){audio.pause();audio.currentTime=0;toggleBtn.innerText="ðŸ”Š Play Audio";toggleBtn.classList.remove("audio-playing");toggleBtn.classList.add("audio-paused")}},onEnterBack:()=>{if(audioAllowed){audio.play();toggleBtn.innerText="ðŸ”ˆ Pause Audio";toggleBtn.classList.remove("audio-paused");toggleBtn.classList.add("audio-playing")}},onLeave:()=>{if(audioAllowed){audio.pause();audio.currentTime=0;toggleBtn.innerText="ðŸ”Š Play Audio";toggleBtn.classList.remove("audio-playing");toggleBtn.classList.add("audio-paused")}}});document.addEventListener('play',function(e){if(e.target.tagName==='VIDEO'){if(!audio.paused){audio.pause();toggleBtn.innerText="ðŸ”Š Play Audio";toggleBtn.classList.remove("audio-playing");toggleBtn.classList.add("audio-paused")}}},!0);document.addEventListener('pause',function(e){if(e.target.tagName==='VIDEO'&&audioAllowed){const allVideos=document.querySelectorAll('video');const anyPlaying=Array.from(allVideos).some(v=>!v.paused&&!v.ended);if(!anyPlaying&&audio.paused){audio.play();toggleBtn.innerText="ðŸ”ˆ Pause Audio";toggleBtn.classList.remove("audio-paused");toggleBtn.classList.add("audio-playing")}}},!0);document.addEventListener('ended',function(e){if(e.target.tagName==='VIDEO'&&audioAllowed){const allVideos=document.querySelectorAll('video');const anyPlaying=Array.from(allVideos).some(v=>!v.paused&&!v.ended);if(!anyPlaying&&audio.paused){audio.play();toggleBtn.innerText="ðŸ”ˆ Pause Audio";toggleBtn.classList.remove("audio-paused");toggleBtn.classList.add("audio-playing")}}},!0)